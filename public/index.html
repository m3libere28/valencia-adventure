<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medaglia-Asprilla Family: Valencia Adventure</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    
    <!-- Core Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    
    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
    <!-- App Scripts -->
    <script src="js/auth.js" defer></script>
    <script src="js/journal.js" defer></script>
    <script src="js/budget.js" defer></script>
    <script src="js/currency.js" defer></script>
    <script src="js/decorative.js" defer></script>
    <script src="js/schools.js" defer></script>
    <script src="js/apartments.js" defer></script>
    <script src="js/housing.js" defer></script>
    <script src="js/clothing.js" defer></script>
    <script src="js/countdown.js" defer></script>
    <script src="js/weather.js" defer></script>

    <!-- Auth Alert -->
    <div id="auth-alert" class="fixed top-4 right-4 z-50 hidden"></div>
    
    <!-- Navigation Bar -->
    <nav class="fixed top-0 left-0 right-0 bg-white bg-opacity-90 backdrop-blur-md shadow-md z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/Home -->
                <a href="#" class="text-xl font-bold text-blue-600">Valencia Adventure</a>
                
                <!-- Navigation Links (Desktop) -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#housing" class="text-gray-600 hover:text-blue-600">Housing</a>
                    <a href="#timeline" class="text-gray-600 hover:text-blue-600">Timeline</a>
                    <a href="#schools" class="text-gray-600 hover:text-blue-600">Schools</a>
                    <a href="#budget" class="text-gray-600 hover:text-blue-600">Budget</a>
                    <a href="#journal" class="text-gray-600 hover:text-blue-600">Journal</a>
                </div>
                
                <!-- User Section -->
                <div class="flex items-center space-x-4">
                    <!-- User Profile (hidden by default) -->
                    <div id="userSection" class="hidden items-center space-x-2">
                        <img id="userPicture" class="w-8 h-8 rounded-full hidden" alt="Profile">
                        <span id="userName" class="text-sm font-medium"></span>
                        <button id="logoutBtn" class="hidden text-sm text-red-600 hover:text-red-800">
                            Logout
                        </button>
                    </div>
                    
                    <!-- Login Button -->
                    <button id="loginBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        Login
                    </button>
                    
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden text-gray-600 hover:text-gray-900">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden">
        <div class="fixed right-0 top-0 bottom-0 w-64 bg-white p-6">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-lg font-semibold">Menu</h3>
                <button id="close-menu" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="flex flex-col space-y-4">
                <a href="#housing" class="text-gray-600 hover:text-blue-600">Housing</a>
                <a href="#timeline" class="text-gray-600 hover:text-blue-600">Timeline</a>
                <a href="#schools" class="text-gray-600 hover:text-blue-600">Schools</a>
                <a href="#budget" class="text-gray-600 hover:text-blue-600">Budget</a>
                <a href="#journal" class="text-gray-600 hover:text-blue-600">Journal</a>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="hero" class="relative h-screen flex items-center justify-center text-white overflow-hidden">
        <!-- Geometric Background -->
        <div class="absolute inset-0 bg-gradient-to-br from-blue-900 via-blue-800 to-purple-900">
            <!-- Inspired by Valencia's City of Arts and Sciences -->
            <div class="geometric-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
                <div class="shape shape-4"></div>
                <div class="shape shape-5"></div>
                <div class="shape shape-6"></div>
            </div>
            <!-- Overlay gradient -->
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/10 to-black/30"></div>
        </div>
        
        <div class="relative z-10 text-center">
            <h1 class="text-5xl md:text-7xl font-bold mb-8 animate-fade-in">Valencia Adventure</h1>
            <p class="text-xl md:text-2xl mb-12 animate-fade-in-delay">Join our journey to a new life in Spain</p>
            
            <!-- Countdown Timer -->
            <div id="countdown" class="max-w-4xl mx-auto bg-white/10 rounded-xl p-6 backdrop-blur-md">
                <div class="animate-pulse flex flex-col space-y-4">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="bg-white/20 rounded-lg p-4">
                            <div class="h-10 bg-white/20 rounded"></div>
                            <div class="h-4 bg-white/20 rounded mt-2"></div>
                        </div>
                        <div class="bg-white/20 rounded-lg p-4">
                            <div class="h-10 bg-white/20 rounded"></div>
                            <div class="h-4 bg-white/20 rounded mt-2"></div>
                        </div>
                        <div class="bg-white/20 rounded-lg p-4">
                            <div class="h-10 bg-white/20 rounded"></div>
                            <div class="h-4 bg-white/20 rounded mt-2"></div>
                        </div>
                        <div class="bg-white/20 rounded-lg p-4">
                            <div class="h-10 bg-white/20 rounded"></div>
                            <div class="h-4 bg-white/20 rounded mt-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <style>
            .geometric-shapes {
                position: absolute;
                inset: 0;
                overflow: hidden;
            }

            .shape {
                position: absolute;
                opacity: 0.6;
                animation: float 20s infinite;
                backdrop-filter: blur(8px);
                background: linear-gradient(45deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
                border: 1px solid rgba(255,255,255,0.1);
            }

            .shape-1 {
                width: 600px;
                height: 600px;
                top: -20%;
                left: -10%;
                border-radius: 43% 57% 70% 30% / 45% 45% 55% 55%;
                transform-origin: 50% 50%;
                animation: morph1 15s linear infinite;
            }

            .shape-2 {
                width: 500px;
                height: 500px;
                top: 60%;
                right: -10%;
                border-radius: 70% 30% 30% 70% / 60% 40% 60% 40%;
                transform-origin: 50% 50%;
                animation: morph2 12s linear infinite;
            }

            .shape-3 {
                width: 400px;
                height: 400px;
                bottom: 10%;
                left: 20%;
                border-radius: 50% 50% 20% 80% / 25% 80% 20% 75%;
                transform-origin: 50% 50%;
                animation: morph3 18s linear infinite;
            }

            .shape-4 {
                width: 300px;
                height: 300px;
                top: 30%;
                right: 20%;
                border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
                transform-origin: 50% 50%;
                animation: morph4 20s linear infinite;
            }

            .shape-5 {
                width: 350px;
                height: 350px;
                bottom: 30%;
                left: 5%;
                border-radius: 35% 65% 65% 35% / 35% 65% 35% 65%;
                transform-origin: 50% 50%;
                animation: morph5 25s linear infinite;
            }

            .shape-6 {
                width: 450px;
                height: 450px;
                top: 10%;
                right: 5%;
                border-radius: 40% 60% 70% 30% / 40% 50% 50% 60%;
                transform-origin: 50% 50%;
                animation: morph6 22s linear infinite;
            }

            @keyframes morph1 {
                0%, 100% { border-radius: 43% 57% 70% 30% / 45% 45% 55% 55%; }
                25% { border-radius: 57% 43% 30% 70% / 55% 55% 45% 45%; }
                50% { border-radius: 30% 70% 70% 30% / 45% 55% 45% 55%; }
                75% { border-radius: 70% 30% 50% 50% / 55% 45% 55% 45%; }
            }

            @keyframes morph2 {
                0%, 100% { border-radius: 70% 30% 30% 70% / 60% 40% 60% 40%; }
                25% { border-radius: 30% 70% 70% 30% / 40% 60% 40% 60%; }
                50% { border-radius: 50% 50% 50% 50% / 40% 60% 40% 60%; }
                75% { border-radius: 60% 40% 40% 60% / 50% 50% 50% 50%; }
            }

            @keyframes morph3 {
                0%, 100% { border-radius: 50% 50% 20% 80% / 25% 80% 20% 75%; }
                25% { border-radius: 80% 20% 50% 50% / 75% 25% 80% 20%; }
                50% { border-radius: 20% 80% 50% 50% / 20% 75% 25% 80%; }
                75% { border-radius: 50% 50% 80% 20% / 80% 20% 75% 25%; }
            }

            @keyframes morph4 {
                0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
                25% { border-radius: 40% 60% 70% 30% / 30% 60% 40% 70%; }
                50% { border-radius: 30% 70% 40% 60% / 70% 40% 30% 60%; }
                75% { border-radius: 70% 30% 60% 40% / 40% 70% 60% 30%; }
            }

            @keyframes morph5 {
                0%, 100% { border-radius: 35% 65% 65% 35% / 35% 65% 35% 65%; }
                25% { border-radius: 65% 35% 35% 65% / 65% 35% 65% 35%; }
                50% { border-radius: 35% 65% 65% 35% / 65% 35% 65% 35%; }
                75% { border-radius: 65% 35% 35% 65% / 35% 65% 35% 65%; }
            }

            @keyframes morph6 {
                0%, 100% { border-radius: 40% 60% 70% 30% / 40% 50% 50% 60%; }
                25% { border-radius: 60% 40% 30% 70% / 50% 40% 60% 50%; }
                50% { border-radius: 70% 30% 40% 60% / 60% 50% 40% 50%; }
                75% { border-radius: 30% 70% 60% 40% / 40% 60% 50% 50%; }
            }

            @keyframes float {
                0%, 100% { transform: translateY(0) rotate(0deg); }
                25% { transform: translateY(-20px) rotate(2deg); }
                50% { transform: translateY(10px) rotate(-1deg); }
                75% { transform: translateY(-15px) rotate(1deg); }
            }

            .animate-fade-in {
                opacity: 0;
                animation: fade-in 1s forwards;
            }
            
            .animate-fade-in-delay {
                opacity: 0;
                animation: fade-in 1s forwards 0.3s;
            }
            
            @keyframes fade-in {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        </style>
    </section>

    <!-- Introduction Section -->
    <section id="introduction" class="relative py-24 bg-gradient-to-br from-blue-50 to-purple-50 overflow-hidden">
        <!-- Animated background elements -->
        <div class="absolute inset-0 opacity-20">
            <div class="animate-float-slow absolute top-10 left-10 w-64 h-64 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl"></div>
            <div class="animate-float-medium absolute top-40 right-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl"></div>
            <div class="animate-float-fast absolute bottom-10 left-1/3 w-56 h-56 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 relative">
            <!-- Grid layout for content -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                <!-- Left column: Text content -->
                <div class="space-y-8 opacity-0" id="intro-text">
                    <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                        Welcome to Our Journey
                    </h2>
                    <p class="text-xl text-gray-700 leading-relaxed">
                        We're the Medaglia-Asprilla family - Emily, Helbert, and little Michelangelo - embarking on an exciting adventure to Valencia, Spain. This website is our digital home where we'll document our experiences, plan our move, and share our story with family and friends.
                    </p>
                    <div class="flex flex-wrap gap-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                                <i class="fas fa-calendar-alt text-2xl text-blue-600"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Duration</h3>
                                <p class="text-gray-600">16 months</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                                <i class="fas fa-map-marker-alt text-2xl text-purple-600"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Location</h3>
                                <p class="text-gray-600">Valencia, Spain</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center">
                                <i class="fas fa-users text-2xl text-pink-600"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">Family</h3>
                                <p class="text-gray-600">Adventure of 3</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right column: Interactive elements -->
                <div class="relative opacity-0" id="intro-visual">
                    <!-- Spain map outline SVG -->
                    <div class="w-full aspect-square relative">
                        <svg viewBox="0 0 200 200" class="w-full h-full transform rotate-12">
                            <path d="M40,100 Q60,60 100,40 Q140,60 160,100 Q140,140 100,160 Q60,140 40,100 Z" 
                                  class="fill-none stroke-blue-600 stroke-2"
                                  id="spain-path" />
                            <!-- Animated dot -->
                            <circle r="4" fill="#EC4899" id="moving-dot">
                                <animateMotion dur="8s" repeatCount="indefinite">
                                    <mpath href="#spain-path" />
                                </animateMotion>
                            </circle>
                        </svg>
                        <!-- Valencia marker -->
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                            <div class="relative">
                                <div class="w-4 h-4 bg-red-500 rounded-full"></div>
                                <div class="absolute top-0 left-0 w-4 h-4 bg-red-500 rounded-full animate-ping"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mt-16 opacity-0" id="intro-stats">
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-600" id="days-counter">0</div>
                    <p class="text-gray-600">Days Until Move</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-600" id="tasks-counter">0</div>
                    <p class="text-gray-600">Tasks Completed</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-pink-600" id="places-counter">0</div>
                    <p class="text-gray-600">Places to Visit</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-indigo-600" id="memories-counter">0</div>
                    <p class="text-gray-600">Memories Made</p>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animate introduction elements when they come into view
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.id === 'intro-text') {
                            gsap.fromTo(entry.target, 
                                { opacity: 0, x: -50 },
                                { opacity: 1, x: 0, duration: 1, ease: 'power2.out' }
                            );
                        } else if (entry.target.id === 'intro-visual') {
                            gsap.fromTo(entry.target,
                                { opacity: 0, x: 50 },
                                { opacity: 1, x: 0, duration: 1, ease: 'power2.out' }
                            );
                        } else if (entry.target.id === 'intro-stats') {
                            gsap.fromTo(entry.target,
                                { opacity: 0, y: 30 },
                                { opacity: 1, y: 0, duration: 1, ease: 'power2.out' }
                            );
                            // Animate counters
                            animateCounter('days-counter', 459);
                            animateCounter('tasks-counter', 24);
                            animateCounter('places-counter', 15);
                            animateCounter('memories-counter', 0);
                        }
                    }
                });
            }, { threshold: 0.2 });

            // Observe elements
            ['intro-text', 'intro-visual', 'intro-stats'].forEach(id => {
                const element = document.getElementById(id);
                if (element) observer.observe(element);
            });

            // Counter animation function
            function animateCounter(id, target) {
                const element = document.getElementById(id);
                let current = 0;
                const increment = target / 50;
                const interval = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(interval);
                    }
                    element.textContent = Math.round(current);
                }, 30);
            }
        });
    </script>

    <!-- Housing Resources Section -->
    <section id="housing" class="py-20 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">Housing Resources</h2>
            
            <!-- Popular Spanish Real Estate Websites -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
                <a href="https://www.idealista.com" target="_blank" rel="noopener"
                   class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow content-section">
                    <h3 class="text-xl font-semibold mb-3 text-blue-600">Idealista</h3>
                    <p class="text-gray-600 mb-4">Spain's largest property portal with extensive listings in Valencia</p>
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-check-circle mr-2 text-green-500"></i>
                        Available in English
                    </div>
                </a>

                <a href="https://www.fotocasa.es" target="_blank" rel="noopener"
                   class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow content-section">
                    <h3 class="text-xl font-semibold mb-3 text-blue-600">Fotocasa</h3>
                    <p class="text-gray-600 mb-4">Popular Spanish real estate site with detailed property photos</p>
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-globe mr-2"></i>
                        Spanish interface
                    </div>
                </a>

                <a href="https://www.pisos.com" target="_blank" rel="noopener"
                   class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow content-section">
                    <h3 class="text-xl font-semibold mb-3 text-blue-600">Pisos.com</h3>
                    <p class="text-gray-600 mb-4">Comprehensive property search with virtual tours</p>
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-globe mr-2"></i>
                        Spanish interface
                    </div>
                </a>
            </div>

            <!-- Rental Process Guide -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-16 content-section">
                <h3 class="text-2xl font-bold mb-6">Rental Process in Spain</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="space-y-3">
                        <div class="text-3xl text-blue-600 mb-2">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <h4 class="font-semibold">Required Documents</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>• NIE (Foreigner ID)</li>
                            <li>• Proof of income</li>
                            <li>• Bank statements</li>
                            <li>• Employment contract</li>
                        </ul>
                    </div>

                    <div class="space-y-3">
                        <div class="text-3xl text-blue-600 mb-2">
                            <i class="fas fa-euro-sign"></i>
                        </div>
                        <h4 class="font-semibold">Typical Costs</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>• 1-2 months deposit</li>
                            <li>• First month's rent</li>
                            <li>• Agency fee (optional)</li>
                            <li>• Utility setup fees</li>
                        </ul>
                    </div>

                    <div class="space-y-3">
                        <div class="text-3xl text-blue-600 mb-2">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h4 class="font-semibold">Contract Terms</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>• Minimum 12 months</li>
                            <li>• 3-year tenant rights</li>
                            <li>• Notice periods</li>
                            <li>• Maintenance terms</li>
                        </ul>
                    </div>

                    <div class="space-y-3">
                        <div class="text-3xl text-blue-600 mb-2">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h4 class="font-semibold">Tips</h4>
                        <ul class="text-gray-600 space-y-2">
                            <li>• Check utility costs</li>
                            <li>• Verify appliances</li>
                            <li>• Document conditions</li>
                            <li>• Read contract carefully</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Rental Calculator -->
            <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                <h3 class="text-xl font-semibold mb-6">Rental Cost Calculator</h3>
                <div class="space-y-6">
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Monthly Rent (€)</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">€</span>
                            <input type="number" id="monthly-rent" 
                                   class="w-full pl-8 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                                   placeholder="e.g. 800">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Security Deposit</label>
                        <select id="deposit-months" 
                                class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                            <option value="1">1 month rent</option>
                            <option value="2">2 months rent</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Agency Fee?</label>
                        <select id="agency-fee" 
                                class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                            <option value="0">No agency fee</option>
                            <option value="1">Yes (1 month rent)</option>
                        </select>
                    </div>

                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="include-utilities" 
                               class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500">
                        <label class="text-sm font-medium text-gray-700">Include utility estimates</label>
                    </div>
                    
                    <button id="calculate-total-cost" class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg 
                                   hover:from-blue-700 hover:to-purple-700 transition-all duration-300
                                   flex items-center justify-center space-x-2">
                        <i class="fas fa-calculator"></i>
                        <span>Calculate Total</span>
                    </button>
                    
                    <!-- Results Area with Initial Message -->
                    <div id="cost-result" class="p-4 bg-gray-50 rounded-lg text-center text-gray-600">
                        Enter the monthly rent and options above to calculate costs
                    </div>
                </div>
            </div>

            <!-- Useful Tools -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h3 class="text-xl font-semibold mb-4">Neighborhood Guide</h3>
                    <div class="space-y-4">
                        <div class="border-b pb-4">
                            <h4 class="font-semibold mb-2">Ciutat Vella (Old Town)</h4>
                            <p class="text-gray-600 mb-2">Historic center, tourist-friendly, vibrant nightlife</p>
                            <div class="flex items-center text-sm text-gray-500">
                                <span class="text-blue-600">€€€</span>
                                <span class="text-gray-500">Historic</span>
                                <span class="text-gray-500">Central</span>
                            </div>
                        </div>
                        <div class="border-b pb-4">
                            <h4 class="font-semibold mb-2">Russafa</h4>
                            <p class="text-gray-600 mb-2">Trendy area, great restaurants, multicultural</p>
                            <div class="flex items-center text-sm text-gray-500">
                                <span class="text-blue-600">€€</span>
                                <span class="text-gray-500">Hip</span>
                                <span class="text-gray-500">Foodie</span>
                            </div>
                        </div>
                        <div class="border-b pb-4">
                            <h4 class="font-semibold mb-2">El Cabanyal</h4>
                            <p class="text-gray-600 mb-2">Beach area, traditional architecture, up-and-coming</p>
                            <div class="flex items-center text-sm text-gray-500">
                                <span class="text-blue-600">€€</span>
                                <span class="text-gray-500">Beach</span>
                                <span class="text-gray-500">Local</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Benimaclet</h4>
                            <p class="text-gray-600 mb-2">Student area, village feel, affordable</p>
                            <div class="flex items-center text-sm text-gray-500">
                                <span class="text-blue-600">€</span>
                                <span class="text-gray-500">Young</span>
                                <span class="text-gray-500">Lively</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('calculate-total-cost').addEventListener('click', calculateTotalCost);
    </script>

    <!-- Timeline Section -->
    <section id="timeline" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Our Journey to Spain</h2>
            <p class="text-xl text-center text-gray-600 mb-16">March 2025 – July 2026</p>
            
            <div class="timeline-container relative">
                <!-- March-May 2025 -->
                <div class="timeline-item group" data-phase="prep">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">📚</span>
                            <h3 class="text-2xl font-bold">March–May 2025: Prepping & Research</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Finalize decision to move to Spain
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Research cities and neighborhoods
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Begin budgeting and savings plan
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Review visa options
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Research international schools
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Current Phase</div>
                        <div class="phase-indicator current-phase">Current</div>
                    </div>
                </div>

                <!-- June-August 2025 -->
                <div class="timeline-item group" data-phase="legal">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">🛂</span>
                            <h3 class="text-2xl font-bold">June–August 2025: Legal & Logistics</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Start visa paperwork
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Make consulate appointments
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Renew passports
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Get background checks
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Upcoming</div>
                        <div class="phase-indicator upcoming-phase">Upcoming</div>
                    </div>
                </div>

                <!-- September-November 2025 -->
                <div class="timeline-item group" data-phase="docs">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">📦</span>
                            <h3 class="text-2xl font-bold">September–November 2025: Documents & Downsizing</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Translate documents
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Begin decluttering
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                List property
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Research shipping options
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Upcoming</div>
                        <div class="phase-indicator upcoming-phase">Upcoming</div>
                    </div>
                </div>

                <!-- December 2025-February 2026 -->
                <div class="timeline-item group" data-phase="health">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">🎒</span>
                            <h3 class="text-2xl font-bold">December 2025–February 2026: Health & Housing</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Medical checkups
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Collect medical records
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Secure housing
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Submit visa application
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Upcoming</div>
                        <div class="phase-indicator upcoming-phase">Upcoming</div>
                    </div>
                </div>

                <!-- March-May 2026 -->
                <div class="timeline-item group" data-phase="school">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">📘</span>
                            <h3 class="text-2xl font-bold">March–May 2026: Schooling & Systems</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Confirm school enrollment
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Complete visa paperwork
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Notify U.S. institutions
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Practice Spanish
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Upcoming</div>
                        <div class="phase-indicator upcoming-phase">Upcoming</div>
                    </div>
                </div>

                <!-- June 2026 -->
                <div class="timeline-item group" data-phase="final">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">📅</span>
                            <h3 class="text-2xl font-bold">June 2026: Final Prep</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Sell car and finish packing
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Cancel subscriptions
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Confirm flight details
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Gather final documents
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Upcoming</div>
                        <div class="phase-indicator upcoming-phase">Upcoming</div>
                    </div>
                </div>

                <!-- July 2026 -->
                <div class="timeline-item group" data-phase="move">
                    <div class="timeline-content bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow content-section">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">✈️</span>
                            <h3 class="text-2xl font-bold">July 2026: Move to Spain!</h3>
                        </div>
                        <ul class="space-y-3 text-gray-600">
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Fly to Valencia!
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Register with town hall
                            </li>
                            <li class="flex items-center task">
                                <span class="w-6 h-6 flex items-center justify-center border-2 border-blue-500 rounded-full mr-3 checkbox">
                                    <i class="fas fa-check text-blue-500 opacity-0"></i>
                                </span>
                                Begin the adventure! 🇪🇸
                            </li>
                        </ul>
                        <div class="mt-4 text-sm text-gray-500">Final Destination</div>
                        <div class="phase-indicator completed-phase">Final</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Timeline animations
        function initTimelineAnimations() {
            gsap.registerPlugin(ScrollTrigger);
            
            // Animate timeline items on scroll
            const timelineItems = document.querySelectorAll('.timeline-item');
            
            timelineItems.forEach((item, index) => {
                const content = item.querySelector('.timeline-content');
                const direction = index % 2 === 0 ? -1 : 1;
                
                // Set initial state
                gsap.set(item, { opacity: 0, x: 50 * direction });
                
                // Create scroll-triggered animation
                gsap.to(item, {
                    opacity: 1,
                    x: 0,
                    duration: 1,
                    scrollTrigger: {
                        trigger: item,
                        start: "top 80%",
                        end: "top 60%",
                        toggleActions: "play none none reverse",
                        scrub: 1
                    }
                });
                
                // Animate the dot
                gsap.from(item.querySelector('::before'), {
                    scale: 0,
                    duration: 0.5,
                    scrollTrigger: {
                        trigger: item,
                        start: "top 75%",
                        toggleActions: "play none none reverse"
                    }
                });
            });

            // Task completion animations
            const tasks = document.querySelectorAll('.task');
            tasks.forEach(task => {
                task.addEventListener('click', () => {
                    const wasCompleted = task.classList.contains('completed');
                    task.classList.toggle('completed');
                    
                    const checkmark = task.querySelector('.fa-check');
                    const checkbox = task.querySelector('.checkbox');
                    
                    if (!wasCompleted) {
                        // Animate when completing
                        gsap.to(checkmark, {
                            opacity: 1,
                            scale: 1,
                            duration: 0.2,
                            ease: "back.out(1.7)"
                        });
                        
                        gsap.to(checkbox, {
                            backgroundColor: '#2563EB',
                            borderColor: '#2563EB',
                            scale: 1.1,
                            duration: 0.3
                        });
                        
                        gsap.to(task, {
                            color: '#6B7280',
                            duration: 0.3
                        });
                    } else {
                        // Animate when uncompleting
                        gsap.to(checkmark, {
                            opacity: 0,
                            scale: 0.8,
                            duration: 0.2
                        });
                        
                        gsap.to(checkbox, {
                            backgroundColor: 'transparent',
                            borderColor: '#3B82F6',
                            scale: 1,
                            duration: 0.3
                        });
                        
                        gsap.to(task, {
                            color: '#374151',
                            duration: 0.3
                        });
                    }
                });
            });
        }

        // Initialize animations when document is loaded
        document.addEventListener('DOMContentLoaded', initTimelineAnimations);
    </script>

    <!-- Weather Section -->
    <section id="weather" class="py-12 bg-gradient-to-br from-blue-50 to-purple-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Valencia Weather <span class="text-2xl">🌞</span></h2>
            <p class="text-xl text-center text-gray-600 mb-16">Real-time weather updates <span class="text-xl">🌡️</span></p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Weather Widget -->
                <div class="bg-white rounded-xl shadow-lg p-8 transform hover:scale-105 transition-transform duration-300">
                    <div id="weather-content" class="flex justify-center items-center min-h-[200px]">
                        <div class="animate-pulse flex space-x-4 items-center">
                            <div class="rounded-full bg-gray-200 h-16 w-16"></div>
                            <div class="space-y-3">
                                <div class="h-4 bg-gray-200 rounded w-24"></div>
                                <div class="h-4 bg-gray-200 rounded w-32"></div>
                                <div class="h-4 bg-gray-200 rounded w-28"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Clothing Recommendations -->
                <div class="bg-white rounded-xl shadow-lg p-8 transform hover:scale-105 transition-transform duration-300">
                    <div id="clothing-content" class="min-h-[200px]">
                        <div class="animate-pulse flex flex-col space-y-4">
                            <div class="space-y-3">
                                <div class="h-6 bg-gray-200 rounded w-48"></div>
                                <div class="h-4 bg-gray-200 rounded w-64"></div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="h-24 bg-gray-200 rounded"></div>
                                <div class="h-24 bg-gray-200 rounded"></div>
                                <div class="h-24 bg-gray-200 rounded"></div>
                                <div class="h-24 bg-gray-200 rounded"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Schools Section -->
    <section id="schools" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Valencia Schools Guide</h2>
            <p class="text-xl text-center text-gray-600 mb-16">Finding the perfect educational fit</p>

            <!-- Schools Map -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12 content-section">
                <h4 class="text-2xl font-semibold mb-6">Schools Map</h4>
                <div id="schools-map" class="h-[600px] rounded-lg"></div>
            </div>

            <!-- International Schools -->
            <div class="mb-20">
                <h3 class="text-3xl font-semibold mb-8">International Schools</h3>
                
                <!-- School cards will be generated dynamically -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12" id="international-schools"></div>
            </div>

            <div class="mb-20">
                <h3 class="text-3xl font-semibold mb-8">Public Schools</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="public-schools"></div>
            </div>

            <!-- Application Tracking Form -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12 content-section">
                <h4 class="text-2xl font-semibold mb-6">School Application Tracker</h4>
                <form id="school-application-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">School Name</label>
                            <input type="text" name="school-name" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Application Status</label>
                            <select name="status" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                <option>Planning to Apply</option>
                                <option>Application in Progress</option>
                                <option>Application Submitted</option>
                                <option>Accepted</option>
                                <option>Rejected</option>
                                <option>Waitlisted</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Application Deadline</label>
                            <input type="date" name="deadline" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Priority Level</label>
                            <select name="priority" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea name="notes" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" rows="3"></textarea>
                    </div>
                    <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        Add to Tracker
                    </button>
                </form>
            </div>

            <!-- Applications Table -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden content-section">
                <h4 class="text-2xl font-semibold mb-6">Current Applications</h4>
                <table class="min-w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="px-6 py-3 text-left text-gray-500 font-semibold">School</th>
                            <th class="px-6 py-3 text-left text-gray-500 font-semibold">Status</th>
                            <th class="px-6 py-3 text-left text-gray-500 font-semibold">Deadline</th>
                            <th class="px-6 py-3 text-left text-gray-500 font-semibold">Priority</th>
                            <th class="px-6 py-3 text-left text-gray-500 font-semibold">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="applications-table-body">
                        <!-- JavaScript will populate this -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <script src="./js/schools.js"></script>
    <script src="./js/journal.js"></script>

    <!-- Budget Section -->
    <section id="budget" class="py-20 bg-gray-50 protected-feature">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Budget Tracker</h2>
            <p class="text-xl text-center text-gray-600 mb-16">Keep track of your expenses in Valencia</p>

            <!-- Budget Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-xl font-semibold">Total Budget</h4>
                        <button id="set-total-budget" class="text-blue-500 hover:text-blue-700">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <p id="total-budget" class="text-3xl font-bold text-green-500">€0.00</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h4 class="text-xl font-semibold mb-4">Total Expenses</h4>
                    <p id="total-expenses" class="text-3xl font-bold text-red-500">€0.00</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h4 class="text-xl font-semibold mb-4">Remaining Budget</h4>
                    <p id="remaining-budget" class="text-3xl font-bold text-blue-500">€0.00</p>
                </div>
            </div>

            <!-- Budget Progress -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-12 content-section">
                <h4 class="text-xl font-semibold mb-4">Budget Progress</h4>
                <div class="h-4 bg-gray-200 rounded-full overflow-hidden">
                    <div id="budget-progress" class="h-full bg-green-500 transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h4 class="text-xl font-semibold mb-4">Spending by Category</h4>
                    <div class="h-80">
                        <canvas id="spending-chart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h4 class="text-xl font-semibold mb-4">Monthly Spending Trend</h4>
                    <div class="h-80">
                        <canvas id="monthly-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Category Spending -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6">Category Spending</h3>
                <div id="category-spending" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 content-section">
                    <!-- Category cards will be generated dynamically -->
                </div>
            </div>

            <!-- Add Expense Form -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12 content-section">
                <h4 class="text-2xl font-semibold mb-6">Add New Expense</h4>
                <form id="expense-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                            <input type="date" name="date" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                            <input type="text" name="description" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                            <select name="category" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                <option value="housing">Housing</option>
                                <option value="utilities">Utilities</option>
                                <option value="groceries">Groceries</option>
                                <option value="transportation">Transportation</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="entertainment">Entertainment</option>
                                <option value="education">Education</option>
                                <option value="shopping">Shopping</option>
                                <option value="savings">Savings</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Amount (€)</label>
                            <input type="number" name="amount" step="0.01" min="0" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea name="notes" rows="3" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
                    </div>
                    <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        Add Expense
                    </button>
                </form>
            </div>

            <!-- Expenses List -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden content-section">
                <div class="p-6 flex justify-between items-center">
                    <h4 class="text-2xl font-semibold">Recent Expenses</h4>
                    <div class="space-x-4">
                        <button id="export-budget-data" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                        <label class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors cursor-pointer">
                            <i class="fas fa-upload mr-2"></i>Import
                            <input type="file" id="import-budget" accept=".json" class="hidden">
                        </label>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-gray-500 font-semibold">Date</th>
                                <th class="px-6 py-3 text-left text-gray-500 font-semibold">Description</th>
                                <th class="px-6 py-3 text-left text-gray-500 font-semibold">Category</th>
                                <th class="px-6 py-3 text-left text-gray-500 font-semibold">Amount</th>
                                <th class="px-6 py-3 text-left text-gray-500 font-semibold">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="expenses-tbody">
                            <!-- Expenses will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('set-total-budget').addEventListener('click', setTotalBudget);
        document.getElementById('export-budget-data').addEventListener('click', exportBudgetData);
    </script>

    <!-- Currency Exchange Section -->
    <section id="currency" class="py-20 bg-gradient-to-br from-blue-50 to-purple-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Currency Exchange</h2>
            <p class="text-xl text-center text-gray-600 mb-16">Quick USD to EUR conversion</p>

            <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-end mb-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Amount</label>
                        <input type="number" id="amount" min="0" step="0.01" 
                               class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" 
                               value="1">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">From</label>
                        <select id="fromCurrency" 
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="USD">USD - US Dollar</option>
                            <option value="EUR">EUR - Euro</option>
                            <option value="GBP">GBP - British Pound</option>
                            <option value="JPY">JPY - Japanese Yen</option>
                            <option value="AUD">AUD - Australian Dollar</option>
                            <option value="CAD">CAD - Canadian Dollar</option>
                            <option value="CHF">CHF - Swiss Franc</option>
                            <option value="CNY">CNY - Chinese Yuan</option>
                        </select>
                    </div>
                    <div class="relative">
                        <label class="block text-sm font-medium text-gray-700 mb-2">To</label>
                        <select id="toCurrency" 
                                class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                            <option value="EUR">EUR - Euro</option>
                            <option value="USD">USD - US Dollar</option>
                            <option value="GBP">GBP - British Pound</option>
                            <option value="JPY">JPY - Japanese Yen</option>
                            <option value="AUD">AUD - Australian Dollar</option>
                            <option value="CAD">CAD - Canadian Dollar</option>
                            <option value="CHF">CHF - Swiss Franc</option>
                            <option value="CNY">CNY - Chinese Yuan</option>
                        </select>
                        <button id="swap-currencies" 
                                class="absolute -left-4 top-8 transform -translate-x-full bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            <i class="fas fa-exchange-alt"></i>
                        </button>
                    </div>
                </div>
                
                <div id="result" class="text-center py-6 border-t border-gray-200">
                    <!-- Exchange rate result will be displayed here -->
                </div>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('swap-currencies').addEventListener('click', swapCurrencies);
    </script>

    <!-- Family Journal Section -->
    <section id="journal" class="py-20 bg-gray-50 protected-feature">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-2">Family Journal</h2>
            <p class="text-xl text-center text-gray-600 mb-16">Capture our family adventures in Valencia</p>

            <!-- Add Entry Form -->
            <div class="bg-white rounded-xl shadow-lg p-8 mb-12 content-section">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-semibold">Add New Entry</h3>
                    <div class="space-x-4">
                        <button id="export-journal" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export Journal
                        </button>
                        <label class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors cursor-pointer">
                            <i class="fas fa-upload mr-2"></i>Import Journal
                            <input type="file" id="import-journal" accept=".json" class="hidden">
                        </label>
                    </div>
                </div>
                <form id="journal-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                            <input type="date" name="date" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                            <input type="text" name="title" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Location Name</label>
                            <input type="text" name="location-name" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Location (Click on map)</label>
                            <input type="text" name="location" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required readonly>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Weather</label>
                            <select name="weather" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                <option value="Sunny">Sunny</option>
                                <option value="Cloudy">Cloudy</option>
                                <option value="Rainy">Rainy</option>
                                <option value="Stormy">Stormy</option>
                                <option value="Snowy">Snowy</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mood</label>
                            <select name="mood" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                <option value="Happy">Happy</option>
                                <option value="Excited">Excited</option>
                                <option value="Relaxed">Relaxed</option>
                                <option value="Tired">Tired</option>
                                <option value="Sad">Sad</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Photos</label>
                        <input type="file" name="photos" multiple accept="image/*" class="w-full text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea name="notes" rows="4" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tags (comma-separated)</label>
                        <input type="text" name="tags" class="w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" placeholder="family, sightseeing, food">
                    </div>
                    <button type="submit" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        Add Entry
                    </button>
                </form>
            </div>

            <!-- Map and Entries Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Map -->
                <div class="bg-white rounded-xl shadow-lg p-6 content-section">
                    <h3 class="text-2xl font-semibold mb-4">Our Adventures Map</h3>
                    <div id="journal-map" class="h-[500px] rounded-lg"></div>
                </div>

                <!-- Journal Entries -->
                <div class="space-y-6">
                    <h3 class="text-2xl font-semibold">Recent Entries</h3>
                    <div id="journal-entries" class="space-y-6 max-h-[500px] overflow-y-auto pr-4">
                        <!-- Entries will be added dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.getElementById('export-journal').addEventListener('click', exportJournal);
    </script>

    <!-- Family Adventure Section -->
    <section id="about" class="py-20 bg-gradient-to-b from-blue-50 to-purple-50">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-16">Our Valencia Adventure</h2>
            
            <!-- Interactive Timeline -->
            <div class="relative">
                <!-- Progress Line -->
                <div class="absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-gradient-to-b from-blue-400 to-purple-400"></div>
                
                <!-- Timeline Items -->
                <div class="space-y-24">
                    <!-- Decision Phase -->
                    <div class="relative flex items-center group" data-aos="fade-up">
                        <div class="w-1/2 pr-8 text-right group-hover:transform group-hover:-translate-x-2 transition-transform">
                            <h3 class="text-2xl font-semibold mb-2 text-blue-600">The Big Decision</h3>
                            <p class="text-gray-600 mb-2">From dreaming about Spain to making it our reality</p>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-white shadow-lg
                                    border-4 border-blue-400 group-hover:scale-110 transition-transform">
                            <i class="fas fa-lightbulb text-blue-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                        </div>
                        <div class="w-1/2 pl-8 group-hover:transform group-hover:translate-x-2 transition-transform">
                            <div class="bg-white rounded-xl shadow-lg p-4 transform transition-transform hover:scale-105">
                                <img src="https://images.unsplash.com/photo-1516738901171-8eb4fc13bd20?auto=format&fit=crop&w=500" 
                                     alt="Dream of Spain" class="w-full h-48 object-cover rounded-lg mb-4">
                                <p class="text-gray-600">After months of research and planning, we decided to embark on this incredible journey</p>
                            </div>
                        </div>
                    </div>

                    <!-- Preparation Phase -->
                    <div class="relative flex items-center group" data-aos="fade-up" data-aos-delay="100">
                        <div class="w-1/2 pr-8 text-right">
                            <div class="bg-white rounded-xl shadow-lg p-4 transform transition-transform hover:scale-105">
                                <img src="https://images.unsplash.com/photo-1450101499163-c8848c66ca85?auto=format&fit=crop&w=500" 
                                     alt="Preparation" class="w-full h-48 object-cover rounded-lg mb-4">
                                <p class="text-gray-600">Getting all our documents ready, learning Spanish, and preparing for the move</p>
                            </div>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-white shadow-lg
                                    border-4 border-purple-400 group-hover:scale-110 transition-transform">
                            <i class="fas fa-tasks text-purple-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                        </div>
                        <div class="w-1/2 pl-8 group-hover:transform group-hover:translate-x-2 transition-transform">
                            <h3 class="text-2xl font-semibold mb-2 text-purple-600">Preparation</h3>
                            <p class="text-gray-600">Making it happen, one step at a time</p>
                        </div>
                    </div>

                    <!-- The Move -->
                    <div class="relative flex items-center group" data-aos="fade-up" data-aos-delay="200">
                        <div class="w-1/2 pr-8 text-right group-hover:transform group-hover:-translate-x-2 transition-transform">
                            <h3 class="text-2xl font-semibold mb-2 text-blue-600">The Big Move</h3>
                            <p class="text-gray-600 mb-2">Crossing the Atlantic to start our new life</p>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-white shadow-lg
                                    border-4 border-blue-400 group-hover:scale-110 transition-transform">
                            <i class="fas fa-plane-departure text-blue-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                        </div>
                        <div class="w-1/2 pl-8">
                            <div class="bg-white rounded-xl shadow-lg p-4 transform transition-transform hover:scale-105">
                                <img src="https://images.unsplash.com/photo-1436491865332-7a61a109cc05?auto=format&fit=crop&w=500" 
                                     alt="Moving Day" class="w-full h-48 object-cover rounded-lg mb-4">
                                <p class="text-gray-600">The excitement and butterflies as we board our flight to Spain</p>
                            </div>
                        </div>
                    </div>

                    <!-- New Life -->
                    <div class="relative flex items-center group" data-aos="fade-up" data-aos-delay="300">
                        <div class="w-1/2 pr-8 text-right">
                            <div class="bg-white rounded-xl shadow-lg p-4 transform transition-transform hover:scale-105">
                                <img src="https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?auto=format&fit=crop&w=500" 
                                     alt="Valencia Life" class="w-full h-48 object-cover rounded-lg mb-4">
                                <p class="text-gray-600">Exploring our new home, making friends, and creating memories</p>
                            </div>
                        </div>
                        <div class="absolute left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-white shadow-lg
                                    border-4 border-purple-400 group-hover:scale-110 transition-transform">
                            <i class="fas fa-heart text-purple-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                        </div>
                        <div class="w-1/2 pl-8 group-hover:transform group-hover:translate-x-2 transition-transform">
                            <h3 class="text-2xl font-semibold mb-2 text-purple-600">New Life in Valencia</h3>
                            <p class="text-gray-600">Living our dream in the heart of Spain</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Family Stats -->
            <div class="mt-20 grid grid-cols-2 md:grid-cols-4 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6 text-center transform hover:scale-105 transition-transform">
                    <div class="text-3xl text-blue-600 mb-2">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="text-4xl font-bold text-gray-800 mb-1 counter" data-target="365">0</div>
                    <div class="text-gray-600">Days Until Move</div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 text-center transform hover:scale-105 transition-transform">
                    <div class="text-3xl text-purple-600 mb-2">
                        <i class="fas fa-language"></i>
                    </div>
                    <div class="text-4xl font-bold text-gray-800 mb-1 counter" data-target="2">0</div>
                    <div class="text-gray-600">Languages Learning</div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 text-center transform hover:scale-105 transition-transform">
                    <div class="text-3xl text-blue-600 mb-2">
                        <i class="fas fa-suitcase"></i>
                    </div>
                    <div class="text-4xl font-bold text-gray-800 mb-1 counter" data-target="8">0</div>
                    <div class="text-gray-600">Suitcases Packed</div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 text-center transform hover:scale-105 transition-transform">
                    <div class="text-3xl text-purple-600 mb-2">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="text-4xl font-bold text-gray-800 mb-1 counter" data-target="100">0</div>
                    <div class="text-gray-600">Excitement Level</div>
                </div>
            </div>
        </div>

        <!-- Animation Script -->
        <script>
            // Counter animation
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-target'));
                const duration = 2000; // 2 seconds
                const step = target / (duration / 16); // 60fps

                function updateCount() {
                    const current = parseInt(counter.innerText);
                    if (current < target) {
                        current += step;
                        if (current >= target) {
                            current = target;
                        }
                        counter.innerText = Math.round(current);
                        setTimeout(updateCount, 16);
                    }
                }

                // Start counter when element is in view
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            updateCount();
                            observer.unobserve(entry.target);
                        }
                    });
                });

                observer.observe(counter);
            });
        </script>
    </section>
</div>
</body>
</html>
